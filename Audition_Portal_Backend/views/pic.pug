form(action="/pic/upload", method="POST", enctype="multipart/form-data", onsubmit="submitForm(event)")
    input(type="file", name="file")
    input(type="submit", value="Upload")

script.
    function submitForm(event) {
    event.preventDefault(); // Prevent the default form submission
    const form = event.target;
    const formData = new FormData(form);
    
    fetch(form.action, {
        method: form.method,
        body: formData
    })
    .then(response => {
        const contentType = response.headers.get("content-type");
        if (contentType && contentType.indexOf("application/json") !== -1) {
            return response.json(); // Parse JSON only if the content type is correct
        } else {
            return response.text().then(text => { throw new Error(`Unexpected response format: ${text}`); });
        }
    })
    .then(data => {
        if (data.url) {
            console.log('File uploaded successfully:', data.url);
        } else {
            console.error('Upload failed:', data.message);
        }
    })
    .catch(error => {
        console.error('An error occurred:', error);
    });
    }

